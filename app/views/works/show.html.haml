- content_for :title, @work.title

%nav.mb-3
  .list-group
    - cache @work.subject do
      = render @work.subject
    - cache @work.student do
      = render @work.student

%nav.nav.nav-pills.justify-content-center.mb-3
  - if @work.synopsis.nil?
    = link_to '梗概', '#', class: 'nav-link disabled'
  - else
    = link_to '梗概', synopsis_path(@work.synopsis), class: 'nav-link'
  = link_to '実作', '#', class: 'nav-link active'

= render 'shared/link_to_original', obj: @work

%header
  %h1
    = @work.title
    - if @work.score > 0
      %span.badge.badge-pill.badge-success= @work.score

%main.mb-5
  .novel{ class: "term-#{@work.subject.term_id}" }= raw(@work.body)

- if @work.appeal.present?
  %section.mb-5
    %header
      %h2 アピール文
    .novel{ class: "term-#{@work.subject.term_id}" }= raw(@work.appeal)

%hr.mb-5

%nav.mb-5
  .list-group
    - @work.subject.works.includes(:student).each do |work|
      - if work == @work
        = render work, class: 'list-group-item-secondary' do
          %span.text-muted.link{ data: { href: student_path(work.student) } }= work.student.name
      - else
        - cache work do
          = render work do
            %span.text-muted.link{ data: { href: student_path(work.student) } }= work.student.name
